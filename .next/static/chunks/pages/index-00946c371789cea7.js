(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5728:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(5694)}])},1429:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var s=n(7568),r=n(4051),a=n.n(r),i=n(5893),c=n(7294),l=n(1855),o=n(6233),d=n(5301),u=n(1664),x=n.n(u);var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Props,t=(e.Icon,e.title),n=e.destination,s=e.onClick;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(x(),{className:"",href:n,children:(0,i.jsx)("div",{onClick:function(){return null===s||void 0===s?void 0:s()},className:"  font-bold cursor-pointer items-center space-x-2 px-4 py-2\n                           rounded-lg hover:bg-gray-100  transition-all duration-200 border "+("Log In"==t?" text-white bg-blue-500 hover:bg-blue-700":" text-blue-500 border-blue-500"),children:t})})})};var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Props,t=e.text,n=e.value;return e.onClick,(0,i.jsx)("div",{className:" text-gray-500 flex group items-center space-x-2 px-1 py-4 transition-all duration-200",children:(0,i.jsxs)("p",{className:"hidden md:inline-flex ",children:[t," :  ",(0,i.jsxs)("span",{className:"px-2 text-blue-700",children:[n,"     "]})]})})},f=n(3299);function p(){return(p=(0,s.Z)(a().mark((function e(t,n){var s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.getSession)({req:t});case 2:s=e.sent,console.log(s);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=function(e){var t=(0,f.useSession)().data,n=(0,c.useState)(null),r=n[0],u=n[1];(0,c.useEffect)((function(){x()}),[]);var x=function(){var e=(0,s.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetching players"),e.prev=1,e.next=4,fetch("/api/players",{method:"GET",headers:{"Content-Type":"application/json"}});case 4:return t=e.sent,e.t0=u,e.next=8,t.json();case 8:e.t1=e.sent,(0,e.t0)(e.t1),200!==t.status&&console.log("something went wrong"+t),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(1),console.log("there was an error reading from the db, ",e.t2);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}();return console.log({data:t}),function(e,t){p.apply(this,arguments)}(),(0,i.jsx)("div",{className:" border-b border-grey-100 bg-white ",children:(0,i.jsxs)("div",{className:"lg:max-w-6xl md:flex md:justify-between py-1 mx-auto ",children:[(0,i.jsx)("div",{className:" hidden md:flex md:justify-start text-xs md:items-start",children:1==e.topStats&&(0,i.jsxs)(i.Fragment,{children:[" ",(0,i.jsx)(h,{text:"Countries",value:"dummy"}),(0,i.jsx)(h,{text:"Players",value:r?r.length:"none"}),(0,i.jsx)(h,{text:"Top Country",value:"Dummy"}),(0,i.jsx)(h,{text:"Fastest Player",value:"Dummy"})]})}),(0,i.jsx)("div",{className:"w-auto"}),(0,i.jsxs)("div",{className:" flex justify-center md:justify-end text-xs items-center space-x-2 ",children:[(0,i.jsx)(m,{Icon:l.Z,title:"Ranking",destination:"/"}),(0,i.jsx)(m,{Icon:o.Z,title:"Calculate",destination:"/calculate/calculate"}),(0,i.jsx)(m,{Icon:o.Z,title:"Train",destination:"/train/train"}),(0,i.jsx)(m,{destination:"",onClick:t?f.signOut:f.signIn,Icon:d.Z,title:t?"Log Out":"Log In"})]})]})})}},5694:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return w},default:function(){return N}});var s=n(5893),r=n(9008),a=n.n(r),i=n(1429),c=n(7568),l=n(4051),o=n.n(l),d=n(7294);var u=d.forwardRef((function(e,t){return d.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e),d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"}))})),x=n(3299),m=n(6501);var h=function(){return(0,x.useSession)().data,(0,s.jsxs)("div",{className:" text-justify px-1 py-4 md:p-9 md:bg-white rounded-xl shadow-md mt-5",children:[(0,s.jsx)("h1",{className:"mb-5 text-center text-xl font-bold",children:" World Mental Math Live Ranking"}),(0,s.jsxs)("p",{children:["Here we are ranking the fastest mental math players in the entire world. that's about "," players from"," countries."]}),(0,s.jsx)("p",{children:"To compete here you have to add numbers as fast as you can, and provide the correct result after the numbers stops flashing."})]})};function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},f.apply(this,arguments)}var p=["cdnSuffix","cdnUrl","countryCode","style","svg"],v=function(e){var t=e.cdnSuffix,n=void 0===t?"svg":t,s=e.cdnUrl,r=void 0===s?"https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/4.1.4/flags/4x3/":s,a=e.countryCode,i=e.style,c=e.svg,l=void 0!==c&&c,o=function(e,t){if(null==e)return{};var n,s,r={},a=Object.keys(e);for(s=0;s<a.length;s++)n=a[s],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,p);if("string"!==typeof a)return null;if(l){var u=""+r+a.toLowerCase()+"."+n;return(0,d.createElement)("img",Object.assign({},o,{src:u,style:f({display:"inline-block",width:"1em",height:"1em",verticalAlign:"middle"},i)}))}var x=a.toUpperCase().replace(/./g,(function(e){return String.fromCodePoint(e.charCodeAt(0)+127397)}));return(0,d.createElement)("span",Object.assign({role:"img"},o,{style:f({display:"inline-block",fontSize:"1em",lineHeight:"1em",verticalAlign:"middle"},i)}),x)};var g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Props,t=e.player,n=e.index,r=(0,d.useState)(""),a=(r[0],r[1]);return(0,d.useEffect)((function(){a(t._createdAt)}),[]),(0,s.jsx)("div",{className:" space-x-3 border-t boder-gray-100 py-1 px-5 md:px-1",children:(0,s.jsxs)("div",{className:" grid grid-cols-4 md:grid-cols-5",children:[(0,s.jsx)("div",{className:"",children:n+1}),(0,s.jsx)("div",{className:" items-center text-gray-400",children:t.country?(0,s.jsx)(v,{countryCode:t.country,svg:!0}):(0,s.jsx)(v,{countryCode:"US",svg:!0})}),(0,s.jsx)("div",{className:"items-center space-x-3 text-gray-600",children:t.username}),(0,s.jsx)("div",{className:" flex justify-end items-center space-x-3 text-gray-600",children:t.level}),(0,s.jsx)("div",{className:" hidden md:flex justify-end items-center space-x-3 text-gray-600"})]})})},j=n(1664),y=n.n(j);var b=function(){var e=(0,d.useState)(""),t=(e[0],e[1],(0,d.useState)("")),n=(t[0],t[1],(0,d.useState)("")),r=(n[0],n[1],(0,d.useState)(null)),a=r[0],i=r[1];(0,d.useEffect)((function(){l()}),[]);var l=function(){var e=(0,c.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/players",{method:"GET",headers:{"Content-Type":"application/json"}});case 3:return t=e.sent,e.t0=i,e.next=7,t.json();case 7:e.t1=e.sent,(0,e.t0)(e.t1),200!==t.status&&console.log("something went wrong"+t),e.next=15;break;case 12:e.prev=12,e.t2=e.catch(0),console.log("there was an error reading from the db, ",e.t2);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=(0,c.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.Am.loading("Refreshing..."),e.next=3,l();case 3:e.sent,m.Am.success("Feed updated !",{id:t});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"lg:col-span-1"}),(0,s.jsxs)("div",{className:"col-span-9 lg:col-span-7 ",children:[(0,s.jsx)("div",{className:"flex items-center justify-between"}),(0,s.jsx)("div",{className:"px-5 md:px-1",children:(0,s.jsx)(h,{players:a,setPlayers:i})}),(0,s.jsxs)("div",{className:" grid grid-cols-1 md:grid-cols-5 md:space-x-4 px-5 md:px-1",children:[(0,s.jsx)(y(),{href:"calculate/calculate",children:(0,s.jsx)("div",{className:"col-span-3 rounded-xl flex my-5 p-4 bg-blue-500 cursor-pointer hover:bg-blue-600 items-center text-white font-bold",children:(0,s.jsx)("span",{children:"Start Calculating Now !"})})}),(0,s.jsxs)("div",{onClick:x,className:" cursor-pointer hover:bg-blue-600 flex justify-between col-span-2 items-center rounded-xl my-0 mb-5 md:my-5 p-4 bg-blue-500 text-white font-bold",children:[(0,s.jsx)("span",{children:"Refresh Ranking"}),(0,s.jsx)("span",{children:(0,s.jsx)(u,{className:" h-8 w-8 cursor-pointer font-bold hover:rotate-180 active:scale-125 text-white transition-all duration-500 ease-out ",title:"Refresh"})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"flex flex-col space-x-3 boder-gray-100 py-1 px-5 md:px-1",children:(0,s.jsxs)("div",{className:" grid grid-cols-4 md:grid-cols-5",children:[(0,s.jsx)("div",{className:"items-center space-x-3 text-gray-600 font-bold",children:"#"}),(0,s.jsx)("div",{className:"items-center space-x-3 text-gray-600 font-bold",children:"Country"}),(0,s.jsx)("div",{className:"items-center space-x-3 text-gray-600 font-bold",children:"Name"}),(0,s.jsx)("div",{className:" flex justify-end items-center space-x-3 text-gray-600 font-bold",children:"Level"}),(0,s.jsx)("div",{className:" hidden md:flex justify-end items-center space-x-3 text-gray-600 font-bold",children:"Last Updated"})]})}),null===a||void 0===a?void 0:a.map((function(e,t){return(0,s.jsx)(g,{index:t,player:e},e.id)}))]})]}),(0,s.jsx)("div",{})]})},w=!0,N=function(){return(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:" bg-zinc-50 mx-auto h-screen ",children:[(0,s.jsx)(i.Z,{topStats:!0}),(0,s.jsx)(a(),{children:(0,s.jsx)("title",{children:"World Math Ranking"})}),(0,s.jsx)(m.x7,{}),(0,s.jsx)("div",{className:"lg:max-w-7xl mx-auto",children:(0,s.jsx)("main",{className:"h-full grid grid-cols-9 h-max",children:(0,s.jsx)(b,{})})})]})})}}},function(e){e.O(0,[480,774,888,179],(function(){return t=5728,e(e.s=t);var t}));var t=e.O();_N_E=t}]);