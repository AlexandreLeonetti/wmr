(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[840],{5142:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/calculate/calculate",function(){return n(5922)}])},1429:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var s=n(7568),r=n(4051),i=n.n(r),a=n(5893),l=n(7294),o=n(1855),c=n(6233),u=n(5301),d=n(1664),h=n.n(d);var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Props,t=(e.Icon,e.title),n=e.destination,s=e.onClick;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(h(),{className:"",href:n,children:(0,a.jsx)("div",{onClick:function(){return null===s||void 0===s?void 0:s()},className:"  font-bold cursor-pointer items-center space-x-2 px-4 py-2\n                           rounded-lg hover:bg-gray-100  transition-all duration-200 border "+("Log In"==t?" text-white bg-blue-500 hover:bg-blue-700":" text-blue-500 border-blue-500"),children:t})})})};var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Props,t=e.text,n=e.value;return e.onClick,(0,a.jsx)("div",{className:" text-gray-500 flex group items-center space-x-2 px-1 py-4 transition-all duration-200",children:(0,a.jsxs)("p",{className:"hidden md:inline-flex ",children:[t," :  ",(0,a.jsxs)("span",{className:"px-2 text-blue-700",children:[n,"     "]})]})})},x=n(3299);function p(){return(p=(0,s.Z)(i().mark((function e(t,n){var s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.getSession)({req:t});case 2:s=e.sent,console.log(s);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b=function(e){var t=(0,x.useSession)().data,n=(0,l.useState)(null),r=n[0],d=n[1];(0,l.useEffect)((function(){h()}),[]);var h=function(){var e=(0,s.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetching players"),e.prev=1,e.next=4,fetch("/api/players",{method:"GET",headers:{"Content-Type":"application/json"}});case 4:return t=e.sent,e.t0=d,e.next=8,t.json();case 8:e.t1=e.sent,(0,e.t0)(e.t1),200!==t.status&&console.log("something went wrong"+t),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(1),console.log("there was an error reading from the db, ",e.t2);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}();return console.log({data:t}),function(e,t){p.apply(this,arguments)}(),(0,a.jsx)("div",{className:" border-b border-grey-100 bg-white ",children:(0,a.jsxs)("div",{className:"lg:max-w-6xl md:flex md:justify-between py-1 mx-auto ",children:[(0,a.jsx)("div",{className:" hidden md:flex md:justify-start text-xs md:items-start",children:1==e.topStats&&(0,a.jsxs)(a.Fragment,{children:[" ",(0,a.jsx)(m,{text:"Countries",value:"dummy"}),(0,a.jsx)(m,{text:"Players",value:r?r.length:"none"}),(0,a.jsx)(m,{text:"Top Country",value:"Dummy"}),(0,a.jsx)(m,{text:"Fastest Player",value:"Dummy"})]})}),(0,a.jsx)("div",{className:"w-auto"}),(0,a.jsxs)("div",{className:" flex justify-center md:justify-end text-xs items-center space-x-2 ",children:[(0,a.jsx)(f,{Icon:o.Z,title:"Ranking",destination:"/"}),(0,a.jsx)(f,{Icon:c.Z,title:"Calculate",destination:"/calculate/calculate"}),(0,a.jsx)(f,{Icon:c.Z,title:"Train",destination:"/train/train"}),(0,a.jsx)(f,{destination:"",onClick:t?x.signOut:x.signIn,Icon:u.Z,title:t?"Log Out":"Log In"})]})]})})}},5922:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var s=n(5893),r=(n(2770),n(9008)),i=n.n(r),a=(n(6501),n(1429)),l=n(7294),o=n(4111),c=n(7568),u=n(1438),d=n(2951),h=n(8029),f=n(460),m=n(4051),x=n.n(m),p=n(4924);var b=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var s;return(0,u.Z)(this,n),s=t.call(this,e),(0,p.Z)((0,o.Z)(s),"backgroundGray",(function(){document.body.style.backgroundColor="rgb(31 41 55)"})),(0,p.Z)((0,o.Z)(s),"backgroundWhite",(function(){document.body.style="background-color:white;"})),(0,p.Z)((0,o.Z)(s),"stopFlasher",(function(){clearInterval(s.updateFlash),console.log("stopFlasher")})),(0,p.Z)((0,o.Z)(s),"launchFlasher",(function(){s.updateFlash=setInterval((function(){var e=s.props.series[s.state.ith];s.setState({cflash:e}),console.log(e),setTimeout((function(){return s.setState({cflash:""})}),2*s.props.period/3),s.state.ith==s.props.numberOfFlashes-1&&(clearInterval(s.updateFlash),setTimeout((function(){return s.setState({flashing:!1})}),2*s.props.period/3)),s.setState({ith:s.state.ith+1})}),s.props.period)})),s.state={ith:0,concatedStrNumber:"",sumOfSerie:0,flashing:!0,succeeded:!1,cflash:"",cresult:""},s.check=s.check.bind((0,o.Z)(s)),s}return(0,d.Z)(n,[{key:"componentDidMount",value:function(){this.launchFlasher(),this.backgroundGray()}},{key:"componentWillUnmount",value:function(){this.backgroundWhite(),this.stopFlasher(),console.log("FlashClass Will unmount"),this.state.succeeded}},{key:"check",value:function(e){for(var t=0,n=0;n<this.props.numberOfFlashes;n++)t+=parseInt(this.props.series[n]);this.setState({cresult:e}),parseInt(e)==parseInt(t)&&(this.setState({succeeded:!0}),this.props.addRatio("success"),this.props.addSession("session"),this.props.level())}},{key:"render",value:function(){var e=this,t=this.state.flashing,n=this.state.succeeded;return(0,s.jsxs)(s.Fragment,{children:[t&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"bg-gray-800 grid grid-rows-5 ",children:[(0,s.jsx)("div",{className:" bg-gray-800 w-full"}),(0,s.jsx)("div",{className:"bg-gray-800 w-full",children:(0,s.jsx)("h1",{className:" betweenVoid text-white text-9xl text-center font-extrabold ",children:t&&this.state.cflash})}),(0,s.jsx)("div",{}),(0,s.jsx)("div",{className:"px-6",children:(0,s.jsx)("button",{className:"bg-gray-500 w-full mt-5 text-gray-800 font-black inline-flex items-center justify-center px-6 py-3 border border-transparent rounded-md shadow-sm text-base ",onClick:function(){return e.props.cancel()},children:"Home"})}),(0,s.jsx)("div",{className:"bg-gray-800 w-full "})]})}),!t&&!n&&(0,s.jsxs)("div",{className:"px-6 grid grid-rows-4",children:[(0,s.jsx)("div",{}),(0,s.jsx)("label",{className:"block text-sm text-center text-white font-black",children:"Enter Result : "}),(0,s.jsx)("input",{type:"number",className:"py-3 px-4 block w-full border-black rounded-xl shadow-sm focus:outline-none border-gray-300 ",autoFocus:!0,value:this.state.cresult,onChange:function(t){return e.check(t.target.value)}}),(0,s.jsx)("div",{}),(0,s.jsx)("div",{className:"px-6",children:(0,s.jsx)("button",{className:"bg-gray-500 w-full mt-5 text-gray-800 font-black inline-flex items-center justify-center px-6 py-3 border border-transparent rounded-md shadow-sm text-base ",onClick:function(){return e.props.cancel()},children:"Home"})})]})]})}}]),n}(l.Component);l.Component;var v=function(e){var t=e.ratio.length+"/"+e.hypothesis.length,n=(100*e.ratio.length/e.hypothesis.length).toFixed(2);return(0,s.jsxs)("div",{className:"Stats ",children:[(0,s.jsx)("div",{className:"",children:(0,s.jsxs)("div",{className:"bcontainer",children:[(0,s.jsx)("button",{className:"disk bg-emerald-400 text-4xl text-white w-40 font-black inline-flex items-center justify-center px-6 py-3 border border-transparent rounded-2xl shadow-sm text-base",onClick:e.startFlashing,children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{className:"text-base",children:"TRY"}),(0,s.jsx)("li",{children:e.contentBtn})]})}),(0,s.jsx)("div",{className:"circle bg-emerald-500"}),(0,s.jsx)("div",{className:"circle bg-emerald-500 delay1"}),(0,s.jsx)("div",{className:"circle bg-emerald-500 delay2"}),(0,s.jsx)("div",{className:"circle bg-emerald-500 delay3"})]})}),(0,s.jsx)("div",{className:" innerStats mt-10",children:(0,s.jsxs)("ul",{className:"text-sm",children:[(0,s.jsxs)("li",{className:"grid grid-cols-2 h-12 mx-6 border-b border-gray-200 dark:border-gray-700 py-3 ",children:[(0,s.jsx)("div",{className:"col-span-1",children:"Score "}),(0,s.jsxs)("div",{className:"col-span-1 text-right",children:[" ",t]})," "]}),(0,s.jsxs)("li",{className:"h-12 grid grid-cols-2 mx-6 border-b border-gray-200 dark:border-gray-700 py-3",children:[(0,s.jsx)("div",{children:"Ratio "}),(0,s.jsxs)("div",{className:"text-right",children:[n," %"]})]}),(0,s.jsxs)("li",{className:"grid grid-cols-2 h-12 mx-6 border-b border-gray-200 dark:border-gray-700 py-3",children:[(0,s.jsx)("div",{children:"Speed in numbers/min"}),(0,s.jsxs)("div",{className:"text-right",children:[" ",60/(e.period/1e3)," "]})]})]})})]})},g={1:{interval:1200,numberOfDigits:1,numberOfTimes:2,lowerBound:1},2:{interval:1200,numberOfDigits:1,numberOfTimes:2,lowerBound:7},3:{interval:1200,numberOfDigits:1,numberOfTimes:3,lowerBound:2},4:{interval:1200,numberOfDigits:1,numberOfTimes:3,lowerBound:6},5:{interval:1200,numberOfDigits:1,numberOfTimes:4,lowerBound:0},6:{interval:1e3,numberOfDigits:1,numberOfTimes:5,lowerBound:0},7:{interval:1e3,numberOfDigits:2,numberOfTimes:2,lowerBound:0},8:{interval:1e3,numberOfDigits:2,numberOfTimes:3,lowerBound:0}},y=n(1664),j=n.n(y);function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var S=n(3299);var N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:props,t=e.title,n=e.onClick;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("button",{className:"mt-10 bg-white text-black font-black w-full inline-flex items-center justify-center px-6 py-3 border border-transparent rounded-md shadow-sm text-base",onClick:function(){return null===n||void 0===n?void 0:n()},children:t})})};var O=function(e){var t=(0,S.useSession)().data,n=(0,l.useState)(""),r=(n[0],n[1],k(l.useState<string>"",2)),i=r[0],a=(r[1],k(l.useState<number>null,2)),o=(a[0],a[1],k(l.useState<boolean>!1,2)),c=(o[0],o[1],k(l.useState<string>"",2)),u=c[0];return c[1],(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(N,{onClick:t?function(){return function(){var n=[i,e.level,u,t.user.name];return console.log(n),n}()}:S.signIn,title:t?"Log Out":"Log In"})})},Z=function(e,t){for(var n="",s=0;s<parseInt(e);s++){var r=Math.ceil(t),i=Math.floor(Math.random()*(10-r)+r);0!=i?n+=String(i):s--}return n},F=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var s;return(0,u.Z)(this,n),(s=t.call(this,e)).state={level:1,mode:"home",flasher:!1,contentBtn:"LEVEL 1",cperiod:1200,cnumberOfDigits:1,cnumberOfFlashes:3,clow:6,series:[],ratio:[],hypothesis:[],country:"",username:"",blockplayer:!1},s.handleStartFlashing=s.handleStartFlashing.bind((0,o.Z)(s)),s.createSeries=s.createSeries.bind((0,o.Z)(s)),s.handleRatio=s.handleRatio.bind((0,o.Z)(s)),s.handleSession=s.handleSession.bind((0,o.Z)(s)),s.goHome=s.goHome.bind((0,o.Z)(s)),s.incLevel=s.incLevel.bind((0,o.Z)(s)),s.sendLevel=s.sendLevel.bind((0,o.Z)(s)),s.postPlayer=s.postPlayer.bind((0,o.Z)(s)),s}return(0,d.Z)(n,[{key:"postPlayer",value:function(){var e=this;return(0,c.Z)(x().mark((function t(){var n,s,r,i;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={username:(null===session||void 0===session?void 0:session.user.name)||"Unkown User",country:e.state.country,level:parseInt(e.state.level),blockPlayer:e.state.blockPlayer},setCountry("_"),t.next=4,fetch("/api/addPlayer",{body:JSON.stringify(n),method:"POST"});case 4:return s=t.sent,t.next=7,s.json();case 7:return r=t.sent,t.next=10,fetchPlayers();case 10:return i=t.sent,setPlayers(i),toast("Player Posted",{icon:""}),t.abrupt("return",r);case 14:case"end":return t.stop()}}),t)})))()}},{key:"sendLevel",value:function(){var e=this;return(0,c.Z)(x().mark((function t(){var n;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={title:"level : "+e.state.level,author:"level : "+e.state.level,genre:"level :"+e.state.level},t.prev=1,t.next=4,fetch("/api/books",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 4:200!==t.sent.status?(console.log("something went wrong while sending level"),console.log(n)):console.log("level submitted successfully !!!"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log("there was an error submitting level",t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()}},{key:"incLevel",value:function(){console.log("level ".concat(this.state.level));var e=this.state.level+1;console.log("lev in incLevel"+e);var t=g[e].interval,n=g[e].numberOfDigits,s=g[e].numberOfTimes,r=g[e].lowerBound;this.setState({level:e,cperiod:t,cnumberOfDigits:n,cnumberOfFlashes:s,clow:r}),console.dir(this.state)}},{key:"handleRatio",value:function(e){var t=this.state.ratio;t.push(e),this.setState({ratio:t})}},{key:"handleSession",value:function(e){var t=this.state.hypothesis;t.push(e),this.setState({hypothesis:t}),this.setState({mode:"stats"});var n=this.state.level+1;this.setState({contentBtn:"LEVEL "+n})}},{key:"goHome",value:function(){this.setState({mode:"home"}),this.setState({contentBtn:"LEVEL "+this.state.level})}},{key:"handleStartFlashing",value:function(){console.log("handleStartFlashing just called"),"flashing"==this.state.mode?(this.setState({mode:"home"}),this.setState({contentBtn:"START"})):"stats"==this.state.mode?(this.createSeries(),this.setState({mode:"flashing"}),this.setState({contentBtn:"Stop Now"})):"home"==this.state.mode&&(this.setState({contentBtn:"Stop"}),this.createSeries(),this.setState({mode:"flashing"}))}},{key:"createSeries",value:function(){for(var e=this.state.series,t=0;t<this.state.cnumberOfFlashes;t++){var n=Z(g[this.state.level].numberOfDigits,g[this.state.level].lowerBound);e[t]=n}console.log("created serie : "),console.log(e),this.setState({series:e})}},{key:"render",value:function(){var e=this,t=this.state.cperiod,n=(this.state.cnumberOfDigits,this.state.cnumberOfFlashes),r=(this.state.clow,this.state.ratio),i=(this.state.flasher,this.state.hypothesis),a=this.state.series,l=this.state.mode,o=this.state.contentBtn;return(0,s.jsx)("div",{className:" flex flex-col justify-center items-start max-w-2xl border-gray-200 dark:border-gray-700 mx-auto pb-16",children:(0,s.jsx)("div",{className:"w-full",children:(0,s.jsxs)("div",{className:"",children:[(0,s.jsxs)("div",{className:" w-full ",children:["flashing"==l&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(b,{period:t,series:a,numberOfFlashes:n,addRatio:this.handleRatio,addSession:this.handleSession,cancel:this.goHome,level:this.incLevel})}),"stats"==l&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v,{ratio:r,hypothesis:i,period:t,startFlashing:function(){return e.handleStartFlashing()},contentBtn:o}),(0,s.jsxs)("div",{className:"grid grid-col-1 px-6",children:[(0,s.jsx)(O,{level:this.state.level}),(0,s.jsx)(j(),{href:"/",children:(0,s.jsx)("a",{className:"mt-5 bg-white text-black font-black w-full inline-flex items-center justify-center px-6 py-3 border border-transparent rounded-md shadow-sm text-base",children:" HOME "})})]})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 ",children:"home"==l&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:" inline-flex items-center justify-center",children:(0,s.jsxs)("div",{className:"py-20 inline-flex items-center justify-center",children:[(0,s.jsx)("button",{className:"disk bg-emerald-400 text-4xl text-white w-40 font-black inline-flex items-center justify-center px-6 py-3 border border-transparent rounded-2xl shadow-sm text-base",onClick:function(){return e.handleStartFlashing()},children:o}),(0,s.jsx)("div",{className:"circle bg-emerald-500"}),(0,s.jsx)("div",{className:"circle bg-emerald-500 delay1"}),(0,s.jsx)("div",{className:"circle bg-emerald-500 delay2"}),(0,s.jsx)("div",{className:"circle bg-emerald-500 delay3"})]})}),(0,s.jsx)(j(),{href:"/",children:(0,s.jsx)("div",{className:" cursor-pointer mt-5 bg-white text-black font-black w-full inline-flex items-center justify-center px-6 py-3 border border-transparent rounded-md shadow-sm text-base",children:"Home"})})]})})]})})})}}]),n}(l.Component);function C(){return(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:" bg-zinc-50 mx-auto h-screen ",children:[(0,s.jsx)(a.Z,{topStats:!1}),(0,s.jsx)(i(),{children:(0,s.jsx)("title",{children:"World Math Ranking"})}),(0,s.jsx)(F,{})]})})}},2770:function(e){"use strict";e.exports=next},4111:function(e,t,n){"use strict";function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return s}})},1438:function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return s}})},2951:function(e,t,n){"use strict";function s(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function r(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}n.d(t,{Z:function(){return r}})},460:function(e,t,n){"use strict";function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function r(e){return s(e)}n.d(t,{Z:function(){return l}});var i=n(4111);function a(e,t){return!t||"object"!==((n=t)&&n.constructor===Symbol?"symbol":typeof n)&&"function"!==typeof t?(0,i.Z)(e):t;var n}function l(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,s=r(e);if(t){var i=r(this).constructor;n=Reflect.construct(s,arguments,i)}else n=s.apply(this,arguments);return a(this,n)}}},8029:function(e,t,n){"use strict";function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}n.d(t,{Z:function(){return r}})}},function(e){e.O(0,[480,774,888,179],(function(){return t=5142,e(e.s=t);var t}));var t=e.O();_N_E=t}]);